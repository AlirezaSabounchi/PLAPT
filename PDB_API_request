import requests
import json

def fetch_data(entry_id):
    url = "YOUR_API_ENDPOINT_HERE" # Replace with the appropriate GraphQL API endpoint

    # Define the query and variables
    query = """
    query ($id: String!) {
      entry(entry_id:$id) {
        # Retrieve amino acid sequence of polymer entities
        polymer_entities {
          entity_poly {
            pdbx_seq_one_letter_code_can
          }
        }

        # Retrieve SMILES data of ligands (nonpolymer entities)
        nonpolymer_entities {
          nonpolymer_comp {
            rcsb_chem_comp_descriptor {
              InChIKey # Assuming InChIKey here. Adjust if needed.
            }
          }
        }
      }
    }
    """
    variables = {
        "id": entry_id
    }

    # Make the API request
    response = requests.post(url, json={'query': query, 'variables': variables})

    if response.status_code == 200:
        return response.json()
    else:
        raise Exception(f"API request failed with status code {response.status_code}")

if __name__ == "__main__":
    entry_id = "YOUR_ENTRY_ID_HERE" # Replace with your entry ID
    data = fetch_data(entry_id)
    print(json.dumps(data, indent=2))

